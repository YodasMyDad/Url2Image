<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <PlaywrightPlatform Condition="'$(PlaywrightPlatform)' == ''">auto</PlaywrightPlatform>
  </PropertyGroup>

  <Target Name="InstallPlaywright" BeforeTargets="Build" Condition="'$(InstallPlaywright)' == 'true'">
    <Message Text="Installing Playwright browsers..." Importance="high" />
    <Exec Command="dotnet tool restore" WorkingDirectory="$(ProjectDir)" Condition="!Exists('$(NuGetPackageRoot)Microsoft.Playwright/')" />
    <Exec Command="pwsh $(NuGetPackageRoot)Microsoft.Playwright/1.*/tools/playwright.ps1 install $(PlaywrightPlatform)" WorkingDirectory="$(ProjectDir)" />
  </Target>
</Project>
